---
source: src/codegen/tests.rs
expression: snapshot
---
SOURCE
fn f(v) {}

# nested calls: each subsequent call gets a register,
# plus one register for `0`.
# in this case the result is used as tail, so `dst` is re-used
f(f(f(0)))


OK
.fn @main
  params 0
  stack 4
  .code
  0  lsmi r3, 0
  1  call r2, fn1   ; fn1=f
  2  call r1, fn1   ; fn1=f
  3  call r0, fn1   ; fn1=f
  4  ret

.fn f
  params 1
  stack 2
  .locals
    v = r1
  .code
  0  lnil r0
  1  ret
