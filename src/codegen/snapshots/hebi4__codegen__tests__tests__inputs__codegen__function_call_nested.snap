---
source: src/codegen/tests.rs
expression: snapshot
---
SOURCE
do {
fn f(v) {}

// nested calls: each subsequent call gets a register,
// plus one register for `0`.
// in this case the result is used as tail, so `dst` is re-used
f(f(f(0)))
}

OK
.fn @main
  params 0
  stack 6
  .locals
    f = r1
  .code
  0  lclosure r1, l0   ; f, uv=0
  1  lsmi r5, 0
  2  call r4, r1, 1   ; dyn
  3  call r3, r1, 1   ; dyn
  4  call r2, r1, 1   ; dyn
  5  retv r2

.fn f
  params 1
  stack 2
  .locals
    v = r1
  .code
  0  lnil r0
  1  ret
