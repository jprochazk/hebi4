---
source: src/codegen/tests.rs
expression: snapshot
---
SOURCE
do {
fn f(v) {}

let a = 0
let b = 1

// dst is `r1`, and arg must go into `r2`,
// but `r2` is already taken, so we have
// to allocate including `dst` and then `mov`.
a = f(1)
}

OK
.fn @main
  params 0
  stack 6
  .locals
    f = r1
    a = r2
    b = r3
  .code
  0  lclosure r1, l0   ; f, uv=0
  1  lsmi r2, 0
  2  lsmi r3, 1
  3  lsmi r5, 1
  4  call r4, r1, 1   ; dyn
  5  mov r2, r4
  6  lnil r0
  7  ret

.fn f
  params 1
  stack 2
  .locals
    v = r1
  .code
  0  lnil r0
  1  ret
